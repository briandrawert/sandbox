(this["webpackJsonpnca_sandbox-climate_chart-v2.app"]=this["webpackJsonpnca_sandbox-climate_chart-v2.app"]||[]).push([[0],{32:function(e,t,a){},50:function(e,t,a){e.exports=a(82)},55:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var o=a(0),l=a.n(o),s=a(15),i=a.n(s),n=(a(55),a(32),a(11)),r=a(12),c=a(20),d=a(19),u=a(17),h=a(103);function _(e){return e}var g=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=[this.props.min_value,this.props.max_value];return l.a.createElement(h.a,{min:1900,max:2018,value:t,onChange:function(t,a){e.props.sliderChanged(a),console.log("handleChange="+a)},valueLabelDisplay:"auto","aria-labelledby":"range-slider",getAriaValueText:_})}}]),a}(l.a.Component),v=a(43),p=a.n(v),b=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var o;return Object(n.a)(this,a),o=t.call(this,e),console.log("PlotRegion object instantated."),o.name="PlotRegion",window.addEventListener("resize",e.handleResize),e.handleResize(),o}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return console.log("PlotRegion render() height="+this.props.plotly_height+" width="+this.props.plotly_width),this.props.plotly_layout.width=this.props.plotly_width,this.props.plotly_layout.height=this.props.plotly_height,console.log("Rendering PlotRegion rev="+this.props.plotly_revision+" this.props.plotly_data="),console.log(this.props.plotly_data),l.a.createElement("div",{id:"plot_region",className:"plot_region"},l.a.createElement(p.a,{data:this.props.plotly_data,layout:this.props.plotly_layout,frames:this.props.plotly_frames,config:this.props.plotly_config,revision:this.props.plotly_revision,onInitialized:function(t){return e.setState(t)},onUpdate:function(t){return e.setState(t)}}))}}]),a}(l.a.Component),m=function(){function e(t,a){Object(n.a)(this,e),this.xmin=1900,this.xmax=2018,this.xvals=t,this.yvals=a}return Object(r.a)(e,[{key:"setXRange",value:function(e,t){this.xmin=e,this.xmax=t}},{key:"getXvalues",value:function(){for(var e=[],t=this.xmin;t<=this.xmax;t++)e.push(t.toString());return console.log("GeneratePlotData.getXvalues()"),console.log(e),e}},{key:"getYvalues",value:function(){for(var e=[],t=this.xmin;t<parseInt(this.xvals[0]);)t++,e.push("0");for(var a=0;t<=parseInt(this.xvals[this.xvals.length-1]);)t++,e.push(this.yvals[a++]);for(;t<=this.xmax;)t++,e.push("0");return console.log("GeneratePlotData.getYvalues()"),console.log(e),e}},{key:"getData",value:function(){return[this.getTrace1(),this.getTrace2()]}},{key:"getTrace1",value:function(){return{uid:"1883be",meta:{columnNames:{x:"Year",y:"NC"}},mode:"lines",name:"Precip",type:"histogram",xsrc:"dmichels:4:3b282f",x:this.getXvalues(),ysrc:"dmichels:4:060bbe",y:this.getYvalues(),xbins:{end:this.xmax,size:5,start:this.xmin},marker:{line:{color:"rgb(88, 179, 171)"},color:"rgb(88, 179, 171)"},nbinsx:0,histfunc:"avg",cumulative:{enabled:!1},transforms:[{meta:{columnNames:{target:"Year"}},type:"filter",value:[this.xmin.toString(),this.xmax.toString()],operation:"[]",targetsrc:"dmichels:4:3b282f",target:this.getXvalues()}],legendgroup:1,orientation:"v",hovertemplate:""}}},{key:"getTrace2",value:function(){return{uid:"5b1527",meta:{columnNames:{x:"Year",y:"NC"}},mode:"markers+lines",name:"Annual Precip",type:"scatter",xsrc:"dmichels:4:3b282f",x:this.getXvalues(),ysrc:"dmichels:4:060bbe",y:this.getYvalues(),marker:{color:"rgb(0, 0, 0)"},transforms:[{meta:{columnNames:{target:"Year"}},type:"filter",value:[this.xmin.toString(),this.xmax.toString()],operation:"[]",targetsrc:"dmichels:4:3b282f",target:this.getXvalues()}]}}},{key:"getLayout",value:function(){return{xaxis:{type:"linear",dtick:5,range:[this.xmin,this.xmax],tick0:0,ticks:"",showline:!1,tickfont:{family:"Roboto"},tickmode:"linear",autorange:!1,tickangle:90,automargin:!0,showspikes:!1,tickformat:"",tickprefix:"",rangeslider:{range:[1967.1226295828067,2020.8773704171933],yaxis:[0,2.053037694013304],visible:!1,autorange:!0},showexponent:"all",exponentformat:"none",spikethickness:4},yaxis:{type:"linear",range:[0,2.053037694013304],ticks:"",autorange:!0,showspikes:!1},bargap:.28,autosize:!0,template:{data:{bar:[{type:"bar",marker:{colorbar:{ticks:"",outlinewidth:0}}}],table:[{type:"table",cells:{fill:{color:"#EBF0F8"},line:{color:"white"}},header:{fill:{color:"#C8D4E3"},line:{color:"white"}}}],carpet:[{type:"carpet",aaxis:{gridcolor:"#C8D4E3",linecolor:"#C8D4E3",endlinecolor:"#2a3f5f",minorgridcolor:"#C8D4E3",startlinecolor:"#2a3f5f"},baxis:{gridcolor:"#C8D4E3",linecolor:"#C8D4E3",endlinecolor:"#2a3f5f",minorgridcolor:"#C8D4E3",startlinecolor:"#2a3f5f"}}],mesh3d:[{type:"mesh3d",colorbar:{ticks:"",outlinewidth:0}}],contour:[{type:"contour",colorbar:{ticks:"",outlinewidth:0},autocolorscale:!0}],heatmap:[{type:"heatmap",colorbar:{ticks:"",outlinewidth:0},autocolorscale:!0}],scatter:[{type:"scatter",marker:{colorbar:{ticks:"",outlinewidth:0}}}],surface:[{type:"surface",colorbar:{ticks:"",outlinewidth:0}}],heatmapgl:[{type:"heatmapgl",colorbar:{ticks:"",outlinewidth:0}}],histogram:[{type:"histogram",marker:{colorbar:{ticks:"",outlinewidth:0}}}],parcoords:[{line:{colorbar:{ticks:"",outlinewidth:0}},type:"parcoords"}],scatter3d:[{type:"scatter3d",marker:{colorbar:{ticks:"",outlinewidth:0}}}],scattergl:[{type:"scattergl",marker:{colorbar:{ticks:"",outlinewidth:0}}}],choropleth:[{type:"choropleth",colorbar:{ticks:"",outlinewidth:0}}],scattergeo:[{type:"scattergeo",marker:{colorbar:{ticks:"",outlinewidth:0}}}],histogram2d:[{type:"histogram2d",colorbar:{ticks:"",outlinewidth:0},autocolorscale:!0}],scatterpolar:[{type:"scatterpolar",marker:{colorbar:{ticks:"",outlinewidth:0}}}],contourcarpet:[{type:"contourcarpet",colorbar:{ticks:"",outlinewidth:0}}],scattercarpet:[{type:"scattercarpet",marker:{colorbar:{ticks:"",outlinewidth:0}}}],scattermapbox:[{type:"scattermapbox",marker:{colorbar:{ticks:"",outlinewidth:0}}}],scatterpolargl:[{type:"scatterpolargl",marker:{colorbar:{ticks:"",outlinewidth:0}}}],scatterternary:[{type:"scatterternary",marker:{colorbar:{ticks:"",outlinewidth:0}}}],histogram2dcontour:[{type:"histogram2dcontour",colorbar:{ticks:"",outlinewidth:0},autocolorscale:!0}]},layout:{geo:{bgcolor:"white",showland:!0,lakecolor:"white",landcolor:"white",showlakes:!0,subunitcolor:"#C8D4E3"},font:{color:"#2a3f5f"},polar:{bgcolor:"white",radialaxis:{ticks:"",gridcolor:"#EBF0F8",linecolor:"#EBF0F8"},angularaxis:{ticks:"",gridcolor:"#EBF0F8",linecolor:"#EBF0F8"}},scene:{xaxis:{ticks:"",gridcolor:"#DFE8F3",gridwidth:2,linecolor:"#EBF0F8",zerolinecolor:"#EBF0F8",showbackground:!0,backgroundcolor:"white"},yaxis:{ticks:"",gridcolor:"#DFE8F3",gridwidth:2,linecolor:"#EBF0F8",zerolinecolor:"#EBF0F8",showbackground:!0,backgroundcolor:"white"},zaxis:{ticks:"",gridcolor:"#DFE8F3",gridwidth:2,linecolor:"#EBF0F8",zerolinecolor:"#EBF0F8",showbackground:!0,backgroundcolor:"white"}},title:{x:.05},xaxis:{ticks:"",gridcolor:"#EBF0F8",linecolor:"#EBF0F8",automargin:!0,zerolinecolor:"#EBF0F8",zerolinewidth:2},yaxis:{ticks:"",gridcolor:"#EBF0F8",linecolor:"#EBF0F8",automargin:!0,zerolinecolor:"#EBF0F8",zerolinewidth:2},ternary:{aaxis:{ticks:"",gridcolor:"#DFE8F3",linecolor:"#A2B1C6"},baxis:{ticks:"",gridcolor:"#DFE8F3",linecolor:"#A2B1C6"},caxis:{ticks:"",gridcolor:"#DFE8F3",linecolor:"#A2B1C6"},bgcolor:"white"},colorway:["#636efa","#EF553B","#00cc96","#ab63fa","#19d3f3","#e763fa","#fecb52","#ffa15a","#ff6692","#b6e880"],hovermode:"closest",colorscale:{diverging:[["0","#8e0152"],["0.1","#c51b7d"],["0.2","#de77ae"],["0.3","#f1b6da"],["0.4","#fde0ef"],["0.5","#f7f7f7"],["0.6","#e6f5d0"],["0.7","#b8e186"],["0.8","#7fbc41"],["0.9","#4d9221"],["1","#276419"]],sequential:[["0","#0508b8"],["0.0893854748603352","#1910d8"],["0.1787709497206704","#3c19f0"],["0.2681564245810056","#6b1cfb"],["0.3575418994413408","#981cfd"],["0.44692737430167595","#bf1cfd"],["0.5363128491620112","#dd2bfd"],["0.6256983240223464","#f246fe"],["0.7150837988826816","#fc67fd"],["0.8044692737430168","#fe88fc"],["0.8938547486033519","#fea5fd"],["0.9832402234636871","#febefe"],["1","#fec3fe"]],sequentialminus:[["0","#0508b8"],["0.0893854748603352","#1910d8"],["0.1787709497206704","#3c19f0"],["0.2681564245810056","#6b1cfb"],["0.3575418994413408","#981cfd"],["0.44692737430167595","#bf1cfd"],["0.5363128491620112","#dd2bfd"],["0.6256983240223464","#f246fe"],["0.7150837988826816","#fc67fd"],["0.8044692737430168","#fe88fc"],["0.8938547486033519","#fea5fd"],["0.9832402234636871","#febefe"],["1","#fec3fe"]]},plot_bgcolor:"white",paper_bgcolor:"white",shapedefaults:{line:{width:0},opacity:.4,fillcolor:"#506784"},annotationdefaults:{arrowhead:0,arrowcolor:"#506784",arrowwidth:1}},themeRef:"PLOTLY_WHITE"},bargroupgap:0,plot_bgcolor:"rgb(251, 252, 254)",paper_bgcolor:"rgb(251, 252, 254)"}}}]),e}(),f=a(102),y=a(104),x=a(44),k=a(25),C=a(45);k.b.add(C.a);var w=["Northeast","Southeast","Midwest","Northern Great Plains","Northwest","Southwest","Southern Great Plains","Alaska","Hawaii","Puerto Rico"],E=["AL","AZ","AR","CA","CO","CT","DE","FL","GA","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","AK","HI","PR","VI"],S=a(65),F=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var o;Object(n.a)(this,a),o=t.call(this,e),console.log("SandboxControls object instantated."),o.loadNCAdata(),o.name="SandBoxControls";var l=window.innerWidth-48,s=window.innerHeight-210;return o.nca_data_index={},o.selected_var="",o.plotly_data=[],o.plotly_layout={},o.plotly_frames=[],o.plotly_config={},o.plotly_revision=0,o.region_sub_select_options=[],o.region_sub_select_disabled=!0,o.var_select_options=[],o.var_select_disabled=!0,o.state={plotly_width:l,plotly_height:s,region_select_value:void 0,region_sub_select_value:void 0,var_select_value:void 0,slider_min_value:1900,slider_max_value:2018,RobustDatasetCheckboxChecked:!1,cached_data:{xvals:[],yvals:{},region:"",varible:"",region_sub:"",_loaded:!1}},o.sliderChanged=o.sliderChanged.bind(Object(c.a)(o)),o.RobustDatasetCheckboxChanged=o.RobustDatasetCheckboxChanged.bind(Object(c.a)(o)),o.PlotRegionResize=o.PlotRegionResize.bind(Object(c.a)(o)),o}return Object(r.a)(a,[{key:"render",value:function(){var e=this;console.log("Rendering SandboxControls this.state="),console.log(this.state);var t=document.getElementById("region_select"),a=" -- ";return t&&""!==t.value&&"national"!==t.value&&(a=t.value.charAt(0).toUpperCase()+t.value.slice(1)),this.populateSubSelect(),this.populateVariableSelect(),this.updatePlotData(),l.a.createElement("div",{className:"sandbox_controls"},l.a.createElement("div",{className:"sandbox_header"},l.a.createElement(x.a,{icon:["fas","chart-line"],color:"#666666",size:"2x"}),l.a.createElement("span",null,"NCA Sandbox - Climate Chart")),l.a.createElement("div",{className:"sandbox_selectors"},l.a.createElement("select",{id:"region_select",value:this.loc_select_value,onChange:function(){return e.regionSelectChanged()}},l.a.createElement("option",{className:"no_select",value:""},"Location/Region"),l.a.createElement("option",{value:"national"},"National"),l.a.createElement("option",{value:"region"},"Regional"),l.a.createElement("option",{value:"state"},"State")),l.a.createElement("select",{style:{width:"170px"},id:"region_sub_select",value:this.state.region_sub_select_value,disabled:this.region_sub_select_disabled,onChange:function(){return e.regionSubSelectChanged()}},l.a.createElement("option",{className:"no_select",value:""},a),this.region_sub_select_options),l.a.createElement("select",{id:"var_select",value:this.state.var_select_value,disabled:this.var_select_disabled,onChange:function(){return e.variableSelectChanged()}},l.a.createElement("option",{className:"no_select",value:""},"Climate variable"),this.var_select_options),l.a.createElement(y.a,{className:"RobustCheckbox",style:{marginLeft:"0px"},control:l.a.createElement(f.a,{checked:this.state.RobustDatasetCheckboxChecked,onChange:this.RobustDatasetCheckboxChanged,color:"primary"}),label:"Use Robust Dataset"})),l.a.createElement("div",{className:"sandbox_slider_outerbox"},l.a.createElement("div",{className:"sandbox_slider_center"},l.a.createElement("div",{className:"sandbox_slider_left_top"}," Start Year/Period "),l.a.createElement("div",{className:"sandbox_slider_left_bottom",id:"start_year"},this.state.slider_min_value),l.a.createElement("div",{className:"sandbox_double_slider_container"},l.a.createElement(g,{sliderChanged:this.sliderChanged,min_value:this.state.slider_min_value,max_value:this.state.slider_max_value})),l.a.createElement("div",{className:"sandbox_slider_right_top"}," End Year/Period "),l.a.createElement("div",{className:"sandbox_slider_right_bottom",id:"end_year"},this.state.slider_max_value))),l.a.createElement(b,{plotly_data:this.plotly_data,plotly_layout:this.plotly_layout,plotly_width:this.state.plotly_width,plotly_height:this.state.plotly_height,plotly_frames:this.plotly_frames,plotly_config:this.plotly_config,plotly_revision:this.plotly_revision,handleResize:this.PlotRegionResize}))}},{key:"populateSubSelect",value:function(){if("region"===this.state.region_select_value){var e=w.map((function(e,t){return l.a.createElement("option",{key:"region_select_options"+t,value:e},e)}));console.log("region_options"),console.log(e),this.region_sub_select_options=e,this.region_sub_select_disabled=!1}else if("state"===this.state.region_select_value){var t=E.map((function(e,t){return l.a.createElement("option",{key:"region_select_options"+t,value:e},e)}));console.log("state_options"),console.log(t),this.region_sub_select_options=t,this.region_sub_select_disabled=!1}else this.region_sub_select_options=[],this.region_sub_select_disabled=!0}},{key:"populateVariableSelect",value:function(){var e=this.state.RobustDatasetCheckboxChecked;console.log("SanboxControls.populateVariableSelect()");var t=this.state.region_select_value;"region"===t&&(t="regions"),console.log("loc_value="+t);var a=document.getElementById("var_select"),o=void 0;a&&(console.log("var_select.value="+a.value),""!==this.var_select_value&&(o=a[a.selectedIndex].innerHTML),console.log("var_selected_text="+o)),console.log("nca_data_index="),console.log(this.nca_data_index);var s=this.nca_data_index[t];console.log("data_subset="),console.log(s);var i=void 0;if(s){for(var n=[],r=0;r<s.length;r++){var c=l.a.createElement("option",{key:"var_select_option"+r,value:s[r].name},s[r].type);if(1950===s[r].start&&e)n.push(c);else{if(1900!==s[r].start||e){console.log("Excluding "+r+" start="+s[r].start);continue}n.push(c)}void 0!==o&&o==s[r].type&&(i=s[r].name,console.log("Found var_select_value="+i+" var_selected_text="+o+" this.state.var_select_value="+this.state.var_select_value+"  i="+r))}console.log("var_select_options="),console.log(n),this.var_select_options=n,this.var_select_disabled=!1,this.state.var_select_value!=i&&(console.log("Updating var_select_value="+i+"  this.state.var_select_value="+this.state.var_select_value),this.setState({var_select_value:i}))}else this.var_select_options=[],this.var_select_disabled=!0}},{key:"loadNCAdata",value:function(){var e=this;S.get("./TSU_Sandbox_Datafiles/index.json").then((function(t){console.log("SanboxControls.loadNCADdata() response="+t),console.log(t),e.nca_data_index=t.data})).catch((function(e){console.log("SanboxControls.loadNCADdata() error="+e)}))}},{key:"parseNCAFile",value:function(e,t,a){var o=[],l=[],s=e.split(/\r?\n/),i=s[0].split(",");console.log("headers="+i);for(var n=0;n<i.length;n++)i[n]=i[n].trim();var r=void 0;if("national"===t)r=1;else if("region"===t||"state"===t)for(var c=1;c<i.length;c+=2)if(i[c]===a){r=c;break}console.log("region="+a),console.log("col_index="+r);for(var d=1;d<s.length;d++){console.log("lines["+d+"]="+s[d]);var u=s[d].split(",");if(u.length<=1)break;var h=parseInt(u[0]),_=parseFloat(u[r]);o.push(h),l.push(_)}return[o,l]}},{key:"updatePlotData",value:function(){var e=this;if(console.log("SanboxControls.updatePlotData()"),console.log("region_select="+this.state.region_select_value),console.log("var_select="+this.state.var_select_value),console.log("region_sub_select="+this.state.region_sub_select_value),void 0!==this.state.region_select_value&&void 0!==this.state.var_select_value&&("region"!=this.state.region_select_value&&"state"!=this.state.region_select_value||void 0!==this.state.region_sub_select_value&&""!=this.state.region_sub_select_value))if(this.state.cached_data._loaded&&this.state.region_select_value===this.state.cached_data.region&&this.state.var_select_value===this.state.cached_data.varible&&this.state.region_sub_select_value===this.state.cached_data.region_sub){console.log("Using Cached data");var t=new m(this.state.cached_data.xvals,this.state.cached_data.yvals);t.setXRange(this.state.slider_min_value,this.state.slider_max_value),this.plotly_data=t.getData(),this.plotly_layout=t.getLayout(),this.plotly_revision=this.plotly_revision+1,isNaN(this.plotly_revision)&&console.log("= ERROR, revision is NaN")}else{var a="./TSU_Sandbox_Datafiles/"+this.state.var_select_value;console.log("fetching file from server. filename="+a),S.get(a).then((function(t){console.log("SanboxControls.updatePlotData() response="),console.log(t);var a=e.parseNCAFile(t.data,e.state.region_select_value,e.state.region_sub_select_value),o=a[0],l=a[1];e.setState((function(e){return{cached_data:{_loaded:!0,xvals:o,yvals:l,region:e.region_select_value,varible:e.var_select_value,region_sub:e.region_sub_select_value}}}))})).catch((function(e){console.log("SanboxControls.updatePlotData() error="+e)}))}else console.log("not plotting"),this.plotly_data=[],this.plotly_layout={},this.plotly_revision=this.plotly_revision+1,isNaN(this.plotly_revision)&&console.log("= ERROR, revision is NaN")}},{key:"sliderChanged",value:function(e){console.log("SanboxControls.sliderChanged(values="+e+")"),e.length&&2===e.length&&(console.log("slider_min_value="+e[0]+" slider_max_value="+e[1]),this.setState({slider_min_value:e[0],slider_max_value:e[1]}))}},{key:"PlotRegionResize",value:function(){var e=window.innerHeight-210,t=window.innerWidth-48;window.innerWidth<949&&(e-=29),console.log("SanboxControls.PlotRegionResize() height="+e+" width="+t),this.setState((function(a){return{plotly_width:t,plotly_height:e}}))}},{key:"RobustDatasetCheckboxChanged",value:function(){console.log("RobustDatasetCheckboxChanged() this.state.RobustDatasetCheckboxChecked="+this.state.RobustDatasetCheckboxChecked),this.setState((function(e){return{RobustDatasetCheckboxChecked:!e.RobustDatasetCheckboxChecked}}))}},{key:"regionSelectChanged",value:function(){console.log("SanboxControls.regionSelectChanged()");var e=document.getElementById("region_select");this.setState((function(t){return{region_select_value:e.value,region_sub_select_value:""}}))}},{key:"variableSelectChanged",value:function(){console.log("SanboxControls.variableSelectChanged()");document.getElementById("region_select");var e=document.getElementById("var_select");document.getElementById("region_sub_select");this.setState((function(t){return{var_select_value:e.value}}))}},{key:"regionSubSelectChanged",value:function(){console.log("SanboxControls.regionSubSelectChanged()");document.getElementById("region_select"),document.getElementById("var_select");var e=document.getElementById("region_sub_select");this.setState((function(t){return{region_sub_select_value:e.value}}))}}]),a}(l.a.Component);var N=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.04be13f5.chunk.js.map